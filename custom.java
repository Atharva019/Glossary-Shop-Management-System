package com.PTSMS;import java.sql.*;import java.time.LocalDate;import java.time.LocalTime;import java.util.*;public interface custom {    default void menu(){        Scanner sc = new Scanner(System.in);        System.out.println("*******Welcome to online glossay shop*******");        System.out.println("1.login\t\t2.create\t\t3.exit");        System.out.println("Enter :");        int choice = sc.nextInt();            switch (choice) {                case 1 -> {                    System.out.println("enter your current roll no. as id");                    System.out.print("\n\t\tID: ");                    int user_id = sc.nextInt();                    System.out.print("\n\t\tpassword: ");                    String pass = sc.next();                    login(user_id, pass);                }                case 2 -> create_user();                default -> {                    System.out.println("Invalid input");                    menu();                }            }    }    //to add new user    default void create_user(){        Scanner sc = new Scanner(System.in);        System.out.println("******************Creating new user*******************");        System.out.print("\n\tEnter id : ");        int user_id = sc.nextInt();        System.out.print("\n\tEnter your name : ");        String name = sc.next();        System.out.print("\n\tEnter your gender : ");        String gnd = sc.next();        //creating password            System.out.println("Password must be 8 digit");            System.out.print("\n\tcreate your password: ");            String pass = sc.next();            System.out.print("\n\tReenter your password: ");            String pass_chk = sc.next();            if (pass.equals(pass_chk)){                System.out.println("\t\tpassword created");            }else {                System.out.print("\n\tPassword not matched with the previous one!\n");            }        try {            Class.forName("oracle.jdbc.driver.OracleDriver");            System.out.println("driver loaded");            Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE",                    "system", "7412369");            String q = "insert into customer (id,name,gender,password) " +                    "values(?,?,?,?)";            PreparedStatement pst = con.prepareStatement(q);            pst.setInt(1, user_id);            pst.setString(2, name);            pst.setString(3, gnd);            pst.setString(4,pass);            int rows = pst.executeUpdate();            if (rows > 0) {                System.out.println("user created successfully\n\n");            }        } catch (SQLException e) {            System.out.println("not connected");        }catch (ClassNotFoundException e) {            e.printStackTrace();        }        menu();    }    //to generating bill and shopping process    default void shop(int user_id){        Scanner sc = new Scanner(System.in);        System.out.println("\n\t\t\t!!!!!!!!!Welcome to shop!!!!!!!!");        System.out.println("\n\tWhich item would you like to buy");        System.out.println("\t\tSelect your category");        System.out.print("""                ========================================================================                \t\t1.dairy\t2.fruits\t3.dessert\t4.vegetables\t5.grains                ========================================================================                """);        System.out.print("\tEnter choice: ");        int choice = sc.nextInt();        switch (choice){            case 1 -> buy("dairy",user_id);            case 2 -> buy("fruits",user_id);            case 3 -> buy("dessert",user_id);            case 4 -> buy("vegetables",user_id);            case 5 -> buy("grains",user_id);            default -> System.out.println("Invalid input!");        }    }    default void buy(String tname,int user_id) {        System.out.println(tname+" "+user_id);        Scanner sc = null;        try {            Class.forName("oracle.jdbc.driver.OracleDriver");            String user = "system";            String pass = "7412369";            Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "" + user, "" + pass);            Statement st = con.createStatement();            ResultSet rs1 = st.executeQuery("select * from " + tname);            while (rs1.next()) {                int id = rs1.getInt("ID");                String name = rs1.getString("NAME");                String rate = rs1.getString("RATE");                double price = rs1.getDouble("PRICE");                int qty = rs1.getInt("QUANTITY");                System.out.println(String.format("%-10s", id) + String.format("%-30s", name) + String.format("%-10s", rate) +                        String.format("%-10s", price) + String.format("%-10s", qty));            }            sc = new Scanner(System.in);            System.out.println("enter limit:");            int i = sc.nextInt();            int[] arr = new int[i];int x;            int[] arr1 = new int[i];            for (x=0;x<i;x++) {                System.out.println("enter id & quantity:");                arr[x] = sc.nextInt();                arr1[x] = sc.nextInt();            }            for (int j=0;j<arr.length;j++)            {                rs1 = st.executeQuery("select * from "+tname+" where id="+arr[j]);                while (rs1.next())                {                    int id = rs1.getInt("ID");                    String    name = rs1.getString("NAME");                    String    rate = rs1.getString("RATE");                    double  price = rs1.getDouble("PRICE");                    int qty = rs1.getInt("QUANTITY");                    //System.out.println(String.format("%-10s",id)+String.format("%-30s",name)+                     //       String.format("%-10s",rate)+String.format("%-10s",price)+String.format("%-10s",qty));                    int min = qty - arr1[j];                    String q = "update " + tname + " set quantity=" + min + " where id=" + id;                    PreparedStatement pst = con.prepareStatement(q);                    int rows = pst.executeUpdate();                    if (rows > 0) {                        System.out.println("go");                    }                    //add in bill table                    String q1 = "insert into bill (ITEM_ID,ITEM_NAME,ITEM_RATE,ITEM_PRICE,ITEM_QTY,USER_ID) " +                            "values(?,?,?,?,?,?)";                    pst = con.prepareStatement(q1);                    pst.setInt(1, id);                    pst.setString(2, name);                    pst.setString(3, rate);                    pst.setDouble(4, price);                    pst.setInt(5, arr1[j]);                    pst.setInt(6, user_id);                    rows = pst.executeUpdate();                    if (rows > 0) {                        System.out.println("Record inserted successfully");                    }                }            }        } catch (ClassNotFoundException e) {            e.printStackTrace();        } catch (SQLException e) {            System.out.println("not connected");        }        System.out.print("\nif you want to buy other items press (1) " +                "to go back to selection section and (2) for bill ,(0) to exit:");        System.out.println("\n1.buy more\n2.bill\n3.back to main menu\n4.exit");        int choice = sc.nextInt();        switch (choice) {            case 1 -> shop(user_id);            case 2 -> bill(user_id);            case 3 -> menu();            case 4 -> System.exit(0);            default -> {                System.out.println("invalid input!");                shop(user_id);            }        }    }    default void login(int user_id,String pass){        try {            Class.forName("oracle.jdbc.driver.OracleDriver");            Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE",                    "system", "7412369");            Statement st  = con.createStatement();            ResultSet rs = st.executeQuery("select * from customer where id="+user_id);            while (rs.next()) {                String pass1 = rs.getString("password");                if (pass.equals(pass1)) {                    System.out.println("login successfully!");                    shop(user_id);                } else {                    System.out.println("wrong password!");                    menu();                }            }            //System.out.println("user not found!");        }catch (ClassNotFoundException e){            e.printStackTrace();        }catch (SQLException e){            System.out.println("not connected");        }    }    //Generating bill    default void bill(int user_id){        double sum=0;int qt=0;        System.out.println(user_id);        System.out.println("creating your bill please wait.........");        LocalDate ld = LocalDate.now();        LocalTime lt = LocalTime.now();        System.out.println("                                                     date:"+ld);        System.out.println("                                                     time:"+lt);        try{            Class.forName("oracle.jdbc.driver.OracleDriver");            Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","system","7412369");            Statement st = con.createStatement();            String q = "select * from bill where USER_ID="+user_id;            ResultSet rs = st.executeQuery(q);            System.out.println("==========================================================================");            System.out.println(String.format("%-10s","id")+String.format("%-30s","name")+                    String.format("%-20s","rate")+String.format("%-10s","price")+String.format("%-10s","qty"));            System.out.println("==========================================================================");            while (rs.next()){                 int id = rs.getInt("ITEM_ID");                String    name = rs.getString("ITEM_NAME");                String    rate = rs.getString("ITEM_RATE");                double  price = rs.getDouble("ITEM_PRICE");                int qty = rs.getInt("ITEM_QTY");                int user_id1 = rs.getInt("USER_ID");                System.out.println(String.format("%-10s",id)+String.format("%-30s",name)+                        String.format("%-20s",rate)+String.format("%-10s",price)+String.format("%-10s",qty));            }            System.out.println("==========================================================================");            rs = st.executeQuery(q);            while (rs.next()){                double  price = rs.getDouble("ITEM_PRICE");                int qty = rs.getInt("ITEM_QTY");                double tot_price = price * qty;                qt = qt+qty;                sum = sum + tot_price;            }            System.out.print("Total:\t\tquantity: "+qt+"\tamount: "+sum);        }catch (ClassNotFoundException e){            e.printStackTrace();        }catch(SQLException e){            System.out.println("not connected");        }        System.out.println("\n\n\t\t\t\t!!!!!!!!!!THANK YOU FOR VISITING!!!!!!!!!!!");    }}